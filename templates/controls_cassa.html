{% extends "layout.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/controls_cassa.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}" />
{% endblock %}

{% block content %}
<h1>Cassa</h1>

<div class="button-group">
    <!-- Coppia (Giallo) - Esistente -->
    <div class="box-add control-panel">
        <form id="queueForm-coppia">
            <label for="playerTypeCoppia">Tipo:</label> <!-- ID univoco -->
            <select id="playerTypeCoppia" name="playerType" class="input-field"> <!-- ID univoco -->
                <option value="couple">Coppia (Giallo)</option>
            </select>
            <label for="playerId-coppia">ID Giocatore:</label>
            <input type="text" id="playerId-coppia" name="playerId" class="input-field" required>
            <button type="submit" id="add-couple-btn" class="btn btn-yellow">Aggiungi Coppia (Giallo)</button>
        </form>
        <div class="status"></div>
    </div>

    <!-- Singolo (Blu) - Esistente -->
    <div class="box-add control-panel">
        <form id="queueForm-singolo">
            <label for="playerTypeSingolo">Tipo:</label> <!-- ID univoco -->
            <select id="playerTypeSingolo" name="playerType" class="input-field"> <!-- ID univoco -->
                <option value="single">Singolo (Blu)</option>
            </select>
            <label for="playerId-singolo">ID Giocatore:</label>
            <input type="text" id="playerId-singolo" name="playerId" class="input-field" required>
            <button type="submit" id="add-single-btn" class="btn btn-blue">Aggiungi Singolo (Blu)</button>
        </form>
        <div class="status"></div>
    </div>

    <!-- Coppia 2 (Viola) - NUOVO -->
    <div class="box-add control-panel">
        <form id="queueForm-coppia2">
            <label for="playerTypeCoppia2">Tipo:</label> <!-- ID univoco -->
            <select id="playerTypeCoppia2" name="playerType" class="input-field"> <!-- ID univoco -->
                <option value="couple2">Coppia 2 (Viola)</option>
            </select>
            <label for="playerId-coppia2">ID Giocatore:</label>
            <input type="text" id="playerId-coppia2" name="playerId" class="input-field" required>
            <button type="submit" id="add-couple2-btn" class="btn btn-purple">Aggiungi Coppia 2 (Viola)</button> <!-- Nuova classe CSS -->
        </form>
        <div class="status"></div>
    </div>

    <!-- Singolo 2 (Arancio) - NUOVO -->
    <div class="box-add control-panel">
        <form id="queueForm-singolo2">
            <label for="playerTypeSingolo2">Tipo:</label> <!-- ID univoco -->
            <select id="playerTypeSingolo2" name="playerType" class="input-field"> <!-- ID univoco -->
                <option value="single2">Singolo 2 (Arancio)</option>
            </select>
            <label for="playerId-singolo2">ID Giocatore:</label>
            <input type="text" id="playerId-singolo2" name="playerId" class="input-field" required>
            <button type="submit" id="add-single2-btn" class="btn btn-orange">Aggiungi Singolo 2 (Arancio)</button> <!-- Nuova classe CSS -->
        </form>
        <div class="status"></div>
    </div>

    <!-- Charlie (Verde) - Esistente -->
    <div class="box-add control-panel">
        <form id="queueForm-charlie">
            <label for="playerTypeCharlie">Tipo:</label> <!-- ID univoco -->
            <select id="playerTypeCharlie" name="playerType" class="input-field"> <!-- ID univoco -->
                <option value="charlie">G&G (Verde)</option>
            </select>
            <label for="playerId-charlie">ID Giocatore:</label>
            <input type="text" id="playerId-charlie" name="playerId" class="input-field" required>
            <button type="submit" id="add-charlie-btn" class="btn btn-green">Aggiungi G&G (Verde)</button>
        </form>
        <div class="status"></div>
    </div>

    <!-- Statico (Rosso) - Esistente -->
    <div class="box-add control-panel">
        <form id="queueForm-statico">
            <label for="playerTypeStatico">Tipo:</label> <!-- ID univoco -->
            <select id="playerTypeStatico" name="playerType" class="input-field"> <!-- ID univoco -->
                <option value="statico">Statico (Rosso)</option>
            </select>
            <label for="playerId-statico">ID Giocatore:</label>
            <input type="text" id="playerId-statico" name="playerId" class="input-field" required>
            <button type="submit" id="add-statico-btn" class="btn btn-red">Aggiungi Statico (Rosso)</button>
        </form>
        <div class="status"></div>
    </div>
</div>

<div class="notification" id="notification"></div>

<br><br>

<!-- Sezione Dashboard incorporata -->
<div class="row big-box">
    <div class="col-6">
      <h1>TIRO PERCORSO DINAMICO 1</h1>
      <!-- Main Box 1 (Alfa/Bravo) - Esistente -->
      <div class="main-box" id="main-box1">
        <div class="col">
          <div class="status-container">
            <div class="status-box" id="alfa-status">
              <h3>Pista ALFA</h3>
              <p>Stato: <span id="alfa-state">-</span></p>
              <p>Tempo rimanente: <span id="alfa-remaining">-</span></p>
              <p>Giocatore attuale: <span id="current-player-alfa">-</span></p>
              <p>Durata: <span id="alfa-duration">-</span></p>
            </div>
            <div class="status-box" id="bravo-status">
              <h3>Pista BRAVO</h3>
              <p>Stato: <span id="bravo-state">-</span></p>
              <p>Tempo rimanente: <span id="bravo-remaining">-</span></p>
              <p>Giocatore attuale: <span id="current-player-bravo">-</span></p>
              <p>Durata: <span id="bravo-duration">-</span></p>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="next-players-container">
            <div class="next-player-card">
              <div class="next-player-title">Prossimo Giocatore ALFA/BRAVO:</div>
              <div class="next-player-charlie" id="next-player-alfa-bravo-text">Nessun Giocatore In Coda</div>
              <button class="skip-button" onclick="skipNextPlayerAlfaBravo()">SKIP <span class="skip-icon">>></span></button>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="boards-container">
            <div class="board">
              <h2>Coda Coppie (Giallo)</h2>
              <ul id="couples-board"></ul>
            </div>
            <div class="board">
              <h2>Coda Singoli (Blu)</h2>
              <ul id="singles-board"></ul>
            </div>
          </div>
        </div>
      </div>
      <br>

      <!-- NUOVA SEZIONE PER ALFA2/BRAVO2 -->
      <h1>TIRO PERCORSO DINAMICO 2</h1>
      <div class="main-box" id="main-box4"> <!-- ID univoco -->
        <div class="col">
          <div class="status-container">
            <div class="status-box" id="alfa2-status"> <!-- ID univoco -->
              <h3>Pista ALFA 2</h3>
              <p>Stato: <span id="alfa2-state">-</span></p> <!-- ID univoco -->
              <p>Tempo rimanente: <span id="alfa2-remaining">-</span></p> <!-- ID univoco -->
              <p>Giocatore attuale: <span id="current-player-alfa2">-</span></p> <!-- ID univoco -->
              <p>Durata: <span id="alfa2-duration">-</span></p> <!-- ID univoco -->
            </div>
            <div class="status-box" id="bravo2-status"> <!-- ID univoco -->
              <h3>Pista BRAVO 2</h3>
              <p>Stato: <span id="bravo2-state">-</span></p> <!-- ID univoco -->
              <p>Tempo rimanente: <span id="bravo2-remaining">-</span></p> <!-- ID univoco -->
              <p>Giocatore attuale: <span id="current-player-bravo2">-</span></p> <!-- ID univoco -->
              <p>Durata: <span id="bravo2-duration">-</span></p> <!-- ID univoco -->
            </div>
          </div>
        </div>
        <div class="col">
          <div class="next-players-container">
            <div class="next-player-card">
              <div class="next-player-title">Prossimo Giocatore ALFA2/BRAVO2:</div>
              <div class="next-player-charlie" id="next-player-alfa-bravo2-text">Nessun Giocatore In Coda</div> <!-- ID univoco -->
              <button class="skip-button" onclick="skipNextPlayerAlfaBravo2()">SKIP <span class="skip-icon">>></span></button>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="boards-container">
            <div class="board">
              <h2>Coda Coppie 2 (Viola)</h2>
              <ul id="couples2-board"></ul> <!-- ID univoco -->
            </div>
            <div class="board">
              <h2>Coda Singoli 2 (Arancio)</h2>
              <ul id="singles2-board"></ul> <!-- ID univoco -->
            </div>
          </div>
        </div>
      </div>
      <br>
      <!-- Fine Nuova Sezione -->

      <h1>POLIGONO G&G</h1>
      <!-- Main Box 2 (Charlie) - Esistente -->
      <div class="main-box" id="main-box2">
         <!-- ... contenuto esistente charlie ... -->
         <div class="col">
            <div class="status-container">
              <div class="status-box" id="charlie-status">
                <h3>Pista CHARLIE</h3>
                <p>Stato: <span id="charlie-state">-</span></p>
                <p>Tempo rimanente: <span id="charlie-remaining">-</span></p>
                <p>Giocatore attuale: <span id="current-player-charlie">-</span></p>
                <p>Durata: <span id="charlie-duration">-</span></p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="next-players-container">
              <div class="next-player-card">
                <div class="next-player-title">Prossimo Giocatore G&G:</div>
                <div class="next-player-charlie" id="next-charlie-text">Nessun Giocatore In Coda</div>
                <button class="skip-button" onclick="skipNextPlayerCharlie()">SKIP <span class="skip-icon">>></span></button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="boards-container">
              <div class="board">
                <h2>Coda G&G (Verde)</h2>
                <ul id="charlie-board"></ul>
              </div>
            </div>
          </div>
      </div>
      <br>
      <h1>POLIGONO STATICO</h1>
      <!-- Main Box 3 (Statico) - Esistente -->
      <div class="main-box" id="main-box3">
        <!-- ... contenuto esistente statico ... -->
        <div class="col">
            <div class="status-container">
              <div class="status-box" id="delta-status">
                <h3>Pista DELTA</h3>
                <p>Stato: <span id="delta-state">-</span></p>
                <p>Tempo rimanente: <span id="delta-remaining">-</span></p>
                <p>Giocatore attuale: <span id="current-player-delta">-</span></p>
                <p>Durata: <span id="delta-duration">-</span></p>
              </div>
              <div class="status-box" id="echo-status">
                <h3>Pista ECHO</h3>
                <p>Stato: <span id="echo-state">-</span></p>
                <p>Tempo rimanente: <span id="echo-remaining">-</span></p>
                <p>Giocatore attuale: <span id="current-player-echo">-</span></p>
                <p>Durata: <span id="echo-duration">-</span></p>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="next-players-container">
              <div class="next-player-card">
                <div class="next-player-title">Prossimo Giocatore Statico:</div>
                <div class="next-player-charlie" id="next-statico-text">Nessun Giocatore In Coda</div>
                <button class="skip-button" onclick="skipNextPlayerStatico()">SKIP <span class="skip-icon">>></span></button>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="boards-container">
              <div class="board">
                <h2>Coda Statico (Rosso)</h2>
                <ul id="statico-board"></ul>
              </div>
            </div>
          </div>
      </div>
    </div>

    <div class="col-6" style="width: 100%;">
      <!-- Sezione Skippati -->
      <div class="skipped-container">
        <div class="skipped-title">Giocatori Skippati</div>
        <div class="skipped-buttons">
          <div id="skipped-couples-buttons"></div>
          <div id="skipped-singles-buttons"></div>
          <div id="skipped-couples2-buttons"></div> <!-- NUOVO -->
          <div id="skipped-singles2-buttons"></div> <!-- NUOVO -->
          <div id="skipped-charlie-buttons"></div>
          <div id="skipped-statico-buttons"></div>
        </div>
      </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<!-- Carica prima dashboard.js perché controls_cassa.js potrebbe dipendere da funzioni definite lì -->
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
<script src="{{ url_for('static', filename='js/controls_cassa.js') }}"></script>
{% endblock %}